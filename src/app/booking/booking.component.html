{{ bookingForm.value | json }}
{{ bookingForm.dirty | json }}
{{ bookingForm.pristine | json }}
{{ bookingForm.valid | json }}

<form [formGroup]="bookingForm" (ngSubmit)="addBooking()">
	<mat-form-field *ngIf="bookingForm.get('passport')">
		<input
			type="text"
			matInput
			formControlName="passport"
			placeholder="Passport Number"
		/>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Room ID</mat-label>
		<input
			type="text"
			matInput
			formControlName="roomId"
			placeholder="Room ID"
		/>
		<!-- <mat-error
			*ngIf="
				emailFormControl.hasError('email') &&
				!emailFormControl.hasError('required')
			"
		>
			Please enter a valid email address
		</mat-error>
		<mat-error *ngIf="emailFormControl.hasError('required')">
			Email is <strong>required</strong>
		</mat-error> -->
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Guest Name</mat-label>
		<input
			type="text"
			matInput
			formControlName="guestName"
			placeholder="Guest Name"
		/>
		<mat-error
			*ngIf="
				bookingForm.get('guestName')?.hasError('invalidName') ||
				bookingForm.get('guestName')?.hasError('invalidChar')
			"
			>Name cannot be TEST or have a special char (*)!</mat-error
		>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Guest Email</mat-label>
		<input
			type="text"
			matInput
			formControlName="guestEmail"
			placeholder="Guest Email"
		/>
		<mat-error *ngIf="bookingForm.get('guestEmail')?.hasError('email')"
			>Provide a valid email!</mat-error
		>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Checkin Date</mat-label>
		<input matInput [matDatepicker]="picker" formControlName="checkinDate" />
		<mat-hint>DD/MM/YYYY</mat-hint>
		<mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
		<mat-datepicker #picker></mat-datepicker>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Checkout Date</mat-label>
		<input matInput [matDatepicker]="picker1" formControlName="checkoutDate" />
		<mat-hint>DD/MM/YYYY</mat-hint>
		<mat-datepicker-toggle
			matIconSuffix
			[for]="picker1"
		></mat-datepicker-toggle>
		<mat-datepicker #picker1></mat-datepicker>
		<!-- {{ bookingForm.get("checkoutDate")?.errors | json }} -->
		<mat-error *ngIf="bookingForm.get('checkoutDate')?.hasError('invalidDate')"
			>Checkout Date cannot be in the past!</mat-error
		>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Booking Status</mat-label>
		<input
			type="text"
			matInput
			formControlName="bookingStatus"
			placeholder="Booking Status"
		/>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Booking Amount</mat-label>
		<input
			type="number"
			matInput
			formControlName="bookingAmount"
			placeholder="Booking Amount"
		/>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Booking Date</mat-label>
		<input
			type="text"
			matInput
			formControlName="bookingDate"
			placeholder="Booking Date"
		/>
	</mat-form-field>
	<mat-form-field class="example-full-width">
		<mat-label>Mobile Number</mat-label>
		<input
			type="text"
			matInput
			formControlName="mobileNumber"
			placeholder="Mobile Number"
		/>
	</mat-form-field>
	<div formGroupName="address">
		<mat-accordion class="example-headers-align" multi>
			<mat-expansion-panel>
				<mat-expansion-panel-header>
					<mat-panel-title> Address </mat-panel-title>
				</mat-expansion-panel-header>

				<mat-form-field class="example-full-width">
					<mat-label>Guest Address</mat-label>
					<input
						type="text"
						matInput
						formControlName="guestAddress"
						placeholder="Guest Address"
					/>
					{{
						bookingForm.get("address.guestAddress")?.hasError("minLength")
							| json
					}}
					<mat-error
						*ngIf="
							bookingForm.get('address.guestAddress')?.hasError('minLength')
						"
						>Min 3 chars!</mat-error
					>
				</mat-form-field>
				<mat-form-field class="example-full-width">
					<mat-label>Guest City</mat-label>
					<input
						type="text"
						matInput
						formControlName="guestCity"
						placeholder="Guest City"
					/>
				</mat-form-field>
				<mat-form-field class="example-full-width">
					<mat-label>Guest State</mat-label>
					<input
						type="text"
						matInput
						formControlName="guestState"
						placeholder="Guest State"
					/>
				</mat-form-field>
				<mat-form-field class="example-full-width">
					<mat-label>Guest Country</mat-label>
					<input
						type="text"
						matInput
						formControlName="guestCountry"
						placeholder="Guest Country"
					/>
				</mat-form-field>
				<mat-form-field class="example-full-width">
					<mat-label>Zip Code</mat-label>
					<input
						type="text"
						matInput
						formControlName="guestZipCode"
						placeholder="Zip Code"
					/>
				</mat-form-field>
			</mat-expansion-panel>
		</mat-accordion>
	</div>
	<div>
		<mat-checkbox class="example-margin" formControlName="tnc"
			>Accept Terms and Conditions</mat-checkbox
		>
	</div>

	<div>
		<button
			mat-raised-button
			color="primary"
			type="button"
			(click)="addGuest()"
		>
			Add Guest
		</button>
		<button
			mat-raised-button
			class="testBtn"
			color="primary"
			type="button"
			(click)="addPassport()"
		>
			Add Passport
		</button>
		<button
			mat-raised-button
			class="testBtn"
			color="primary"
			type="button"
			(click)="deletePassport()"
		>
			Delete Passport
		</button>
	</div>
	<div formArrayName="guests">
		<div *ngFor="let guest of guests.controls; let i = index">
			<div [formGroupName]="i">
				<mat-form-field>
					<input
						type="text"
						matInput
						formControlName="guestName"
						placeholder="Guest Name"
					/>
					<mat-error
						*ngIf="
							bookingForm.get(['guests', i, 'guestName'])?.hasError('required')
						"
						>Required!</mat-error
					>
				</mat-form-field>
				<mat-form-field>
					<input
						type="number"
						matInput
						formControlName="age"
						placeholder="Age"
					/>
				</mat-form-field>
				<!-- <button mat-fab color="red" aria-label="Delete guest">
					<mat-icon>delete</mat-icon>
				</button> -->
				<button
					mat-fab
					class="testBtn"
					color="primary"
					type="button"
					(click)="deleteGuest(i)"
				>
					<mat-icon>delete</mat-icon>
				</button>
			</div>
		</div>
	</div>
	<div>
		<button [disabled]="bookingForm.invalid" mat-raised-button color="primary">
			Book Room
		</button>
	</div>
</form>
